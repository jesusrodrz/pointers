define(['jquery','ko','Magento_Ui/js/form/form','Magento_Customer/js/action/login','Magento_Customer/js/customer-data','Entrepids_Warranty/js/model/warranty-popup','mage/translate','mage/url','Magento_Ui/js/modal/alert','mage/validation'],function($,ko,Component,loginAction,customerData,warrantyPopup,$t,url,alert){'use strict';return Component.extend({checkoutUrl:window.warrantyPopup.checkoutUrl,alertMessage:window.warrantyPopup.alertMessage,warrantyPageUrl:window.warrantyPopup.warrantyPageUrl,modalWindow:null,isLoading:ko.observable(false),defaults:{template:'Entrepids_Warranty/warranty-popup'},initialize:function(){var self=this;this._super();url.setBaseUrl(window.warrantyPopup.baseUrl);loginAction.registerLoginCallback(function(){self.isLoading(false);});},setModalElement:function(element){if(warrantyPopup.modalWindow==null){warrantyPopup.createPopUp(element);}},scrollDown:function(){jQuery('.action-close').trigger('click');var aTag=jQuery(".column.main > span > div#installation-materials");jQuery('html,body').animate({scrollTop:aTag.offset().top},'slow');},isActive:function(){var customer=customerData.get('customer');return customer()==false;},showModal:function(){if(this.modalWindow){$(this.modalWindow).modal('openModal');}else{alert({content:$t('Guest checkout is disabled.')});}},login:function(formUiElement,event){var loginData={},formElement=$(event.currentTarget),formDataArray=formElement.serializeArray();event.stopPropagation();formDataArray.forEach(function(entry){loginData[entry.name]=entry.value;});if(formElement.validation()&&formElement.validation('isValid')){this.isLoading(true);loginAction(loginData);}
return false;}});});